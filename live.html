<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, maximum-scale=1.0, user-scalable=no" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <link href="https://cdn.jsdelivr.net/gh/halfmoonui/halfmoon@1.0.4/css/halfmoon.min.css" rel="stylesheet" />
  <style>
  body, html {
    margin: 0;
    padding: 0;
    height: 100%;
    background: #000;
  }

  #player {
    width: 90%;
    max-width: 900px;
    aspect-ratio: 16 / 9;
    margin: 20px auto 0 auto; /* Add top margin and center horizontally */
    display: block;
  }

  .lang-switcher {
    position: absolute;
    top: 15px;
    right: 20px;
    z-index: 1000;
  }

  .lang-btn {
    background: rgba(0, 0, 0, 0.7);
    color: white;
    border: 1px solid #fff;
    padding: 6px 30px 6px 15px;
    border-radius: 4px;
    cursor: pointer;
    position: relative;
    font-size: 14px;
  }

  .lang-btn::after {
    content: 'â–¼';
    position: absolute;
    right: 8px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 10px;
  }

  .lang-options {
    position: absolute;
    top: 100%;
    right: 0;
    background: rgba(0, 0, 0, 0.9);
    border: 1px solid #555;
    border-radius: 4px;
    margin-top: 5px;
    display: none;
    min-width: 120px;
  }

  .lang-option {
    color: white;
    padding: 8px 15px;
    cursor: pointer;
  }

  .lang-option:hover {
    background: rgba(255, 255, 255, 0.1);
  }
</style>
  <script src="https://content.jwplatform.com/libraries/IDzF9Zmk.js"></script>
  <script>
    jwplayer.key = 'Khpp2dHxlBJHC8MCmLnBuV2jK/DwDnJMniwF6EO9HC/riJ712ZmbHg==';
  </script>
</head>
<body>
  <div id="player"></div>

  <div class="lang-switcher">
    <div class="lang-btn">Hindi</div>
    <div class="lang-options">
      <div class="lang-option" data-lang="hindi">HINDI</div>
      <div class="lang-option" data-lang="english">ENGLISH</div>
      <div class="lang-option" data-lang="astro">ASTRO CRIC</div>
      <div class="lang-option" data-lang="tsports">T SPORTS</div>
    </div>
  </div>

  <script>
    const streams = {
      hindi: "https://v18tataplaysyndication.akamaized.net/bpk-tv/Sports18_1_HD_voot_MOB/output03/hdntl=exp=1744190417~acl=%2f*~data=hdntl~hmac=30ee0759b03cdf4772c816cb38539d8a7aaede4e8c1e24d7951fd5cf6c4e9a7d/Sports18_1_HD_voot_MOB.m3u8",
      astro: "https://top1-cdnnew.newkso.ru/top1-cdn/7UHvIS62zx/mono.m3u8",
      tsports: "https://live.tsports.com/mobile_hls/tsports_live_2/playlist.m3u8", 
      english: "https://starsportseng.pages.dev/index.m3u8"
    };

    let currentLang = "hindi";
    let fallbackOrder = ["hindi", "english", "astro", "tsports"];

    function initJWPlayer(url, fallbackIndex = 0) {
      jwplayer("player").setup({
        file: url,
        width: "100%",
        aspectratio: "16:9",
        autostart: true,
        mute: true, 
        controls: true,
        displaytitle: false,
        image: "https://iili.io/37BgOZJ.md.jpg", 
        logo: {
          file: "",  // removed WhatsApp logo
          link: "",  // removed WhatsApp link
          position: "top-left",
          margin: 6
        },
        // Remove fullscreen from control bar
        controlbar: {
          fullscreen: false
        }
      }).on('error', function() {
        if (fallbackIndex + 1 < fallbackOrder.length) {
          const nextLang = fallbackOrder[fallbackIndex + 1];
          currentLang = nextLang;
          document.querySelector(".lang-btn").textContent = nextLang.charAt(0).toUpperCase() + nextLang.slice(1);
          initJWPlayer(streams[nextLang], fallbackIndex + 1);
        } else {
          alert("All streams failed to load.");
        }
      });
    }

    document.addEventListener("DOMContentLoaded", () => {
      const langBtn = document.querySelector(".lang-btn");
      const langOptions = document.querySelector(".lang-options");

      langBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        langOptions.style.display = "block";
      });

      document.querySelectorAll(".lang-option").forEach((option, index) => {
        option.addEventListener("click", (e) => {
          const selectedLang = e.target.dataset.lang;
          if (selectedLang !== currentLang) {
            currentLang = selectedLang;
            langBtn.textContent = selectedLang.charAt(0).toUpperCase() + selectedLang.slice(1);
            initJWPlayer(streams[selectedLang], fallbackOrder.indexOf(selectedLang));
          }
          langOptions.style.display = "none";
        });
      });

      document.addEventListener("click", (e) => {
        if (!document.querySelector(".lang-switcher").contains(e.target)) {
          langOptions.style.display = "none";
        }
      });

      initJWPlayer(streams.hindi, fallbackOrder.indexOf("hindi"));
    });
  </script>
</body>
</html>
